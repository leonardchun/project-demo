define(["base","app/commonApp"],function(e,t){var n=null;var i={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,pagingType:"full_numbers",ajax:{url:$.path+"/api/sysmessage/findSysMessage",type:"get",data:function(n){t.gridPageFliter(n);var i=e.form.getParams($("#search-form"));var a;if(i){a=$.extend({page:n.page,size:n.size},i)}return a}},columns:[{data:"id",sWidth:"10%"},{data:"content",sWidth:"50%"},{data:"createTime",sWidth:"40%"}],columnDefs:[{render:function(e,t,n,i){return"<div class='checkboxWrapper'><input type='checkbox' name='cb' value='"+n.id+"' class='cb' cid='"+n.id+"'/></div>"},targets:0},{render:function(e,t,n,i){var a=n.type;if(n.state=="1"){if(a=="4"){return"<div title='"+n.content+"'><b>【待办事项】&nbsp;"+n.content+"</b></div>"}else if(a=="2"){return"<div title='"+n.content+"'><b>【系统消息】&nbsp;"+n.content+"</b></div>"}else{return"<div title='"+n.content+"'><b>【告警消息】&nbsp;"+n.content+"</b></div>"}}else{if(a=="4"){return"<div title='"+n.content+"'>【待办事项】&nbsp;"+n.content+"</div>"}else if(a=="2"){return"<div title='"+n.content+"'>【系统消息】&nbsp;"+n.content+"</div>"}else{return"<div title='"+n.content+"'>【告警消息】&nbsp;"+n.content+"</div>"}}},targets:1}],drawCallback:function(n){e.selectAll($("#cball"),$(".cb"),function(){t.checkByGridButton($(".cb"))})}};var a=function(){n=e.datatables({container:$("#msg"),option:i,filter:t.gridFilter})};var s=function(){$(".ui-grid-buttonbar button").on("click",function(){if(!$(this).hasClass("disabled")){if($(this).hasClass("read")){l()}else{o()}}})};var r=function(){$("#search").on("click",function(){t.search(n)})};var c=function(){$("#reset").off().on("click",function(){t.reset($(this).parents(".ui-searchbar").find("form"),n)})};var o=function(){var i=e.getChecks("cb");e.confirm({label:"删除",text:"<div style='text-align:center;font-size:13px;'>确定删除?</div>",confirmCallback:function(){t.submit({url:$.path+"/api/sysmessage/deleteSysMessage",params:i,type:"post",callback:function(){t.search(n)}})}})};var l=function(){var i=e.getChecks("cb");t.submit({url:$.path+"/api/sysmessage/updateSysMessageIsRead",params:i,type:"post",callback:function(){t.search(n)}})};return{main:function(){a();s();r();c()}}});