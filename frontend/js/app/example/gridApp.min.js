define(["base","app/commonApp"],function(t,n){var a=null;var e={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,ajax:{url:"../json/grid2.json",type:"get",contentType:"application/json",data:function(t){return n.getParams(t,$("#search-form"))}},columns:[{data:"id",sWidth:"14%"},{data:"name",sWidth:"14%"},{data:"code",sWidth:"14%"},{data:"ename",sWidth:"14%"},{data:"auditorUserName",sWidth:"14%"},{data:"telphone",sWidth:"14%"},{data:"auditorCompany",sWidth:"16%"}],columnDefs:[{render:function(t,n,a,e){return"<input type='checkbox' name='cb' value='"+a.id+"' class='cb' cid='"+a.id+"'/>"},targets:0}],drawCallback:function(a){t.selectAll($("#cball"),$(".cb"),function(){n.checkByGridButton($(".cb"))})}};var i=function(){a=t.datatables({container:$("#example"),option:e,filter:n.gridFilter});t.scroll({container:$(".ui-gridbar")})};var r=function(){t.form.date({element:$(".date"),isTime:true,theme:"weilan"});$("#search").on("click",function(){n.search(a)})};var c=function(){$("#reset").on("click",function(){n.reset($("#search-form"),a)})};var o=function(){$(".ui-grid-buttonbar .add").on("click",function(){u()});$(".ui-grid-buttonbar .delete").on("click",function(){if($(this).hasClass("disabled")){return}else{l()}});$(".ui-grid-buttonbar .modify").on("click",function(){if($(this).hasClass("disabled")){return}else{s()}})};var s=function(){var e={cid:$(".ui-grid .cb:checked").attr("cid")};var i=t.modal({width:800,height:400,label:"修改",url:"../html/example/grid_modify.html",callback:function(){t.ajax({url:"../json/grid_modify.json",type:"get",success:function(n){if(n.code=="0"){var a=n.data;t.form.init(a,$("#form"))}}})},buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){t.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var e=t.form.getParams($("#form"));if(e){n.submit({url:"../json/submitSuccess.json",params:e});i.hide();n.search(a)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){n.reset($("#form"))}}]})};var l=function(){var e={ids:t.getChecks("cb")};t.confirm({confirmCallback:function(){n.submit({url:"../json/submitSuccess.json",params:e,callback:function(){n.search(a)}})}})};var u=function(){var e=t.modal({width:800,height:400,label:"新建",url:"../html/example/grid_add.html",drag:true,buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){t.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var i=t.form.getParams($("#form"));if(i){n.submit({url:"../json/submitSuccess.json",params:i});e.hide();n.search(a)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){n.reset($("#form"))}}]})};var d=function(){var n=t.form.treeSelect({container:$("#hy"),url:"../json/tree.json"})};return{main:function(){i();o();r();c();d()}}});