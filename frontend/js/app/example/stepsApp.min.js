define(["base","app/commonApp"],function(e,t){var n=null;var a=function(){n=e.steps({container:$("#ui-steps"),data:[{label:"编写项目申请",contentToggle:"#content1"},{label:"填写元数据",contentToggle:"#content2"},{label:"编辑数据项",contentToggle:"#content3",callback:function(){l()}},{label:"编目预览",contentToggle:"#content4"}],buttons:[{type:"back"},{type:"forward",callback:function(){var t=n.getStep();switch(t){case 0:var a=e.form.validate({form:$("#form1"),checkAll:true});return a;break;case 1:var a=e.form.validate({form:$("#form2"),checkAll:true});return a;break;case 2:return true;break}}},{label:"保存",type:"confirm",callback:function(n,a){var o=a.getStep();var l=e.form.validate({form:$("#form4"),checkAll:true});t.loadPage("0-2")}}]});$("#imageBtn").on("click",function(){$("#image").click()});$("#image").on("change",function(){$("#fileName").html($(this).val())})};var o={processing:true,serverSide:false,searching:false,ordering:false,lengthChange:false,bPaginate:false,bInfo:false,drawCallback:function(){$("#example").find("tbody .delete").unbind("click").on("click",function(){grid.deleteRow(this)})}};var l=function(){var t={};var n=0;t.init=function(){grid=e.datatables({container:$("#example"),option:o});t.setAddRow();t.setDeleteRow();grid.addRow(t.getRowData())};t.setAddRow=function(){$("#addRow").on("click",function(){grid.addRow(t.getRowData())})};t.setDeleteRow=function(){$("#example").find("tbody .delete").on("click",function(){grid.deleteRow(this)})};t.getRowData=function(){var e=["<input type='text' name='name"+n+"' class='form-control'/>","<input type='text' name='name"+n+"' class='form-control'/>","<input type='text' name='name"+n+"' class='form-control'/>","<input type='text' name='name"+n+"' class='form-control'/>","<input type='text' name='name"+n+"' class='form-control'/>","<input type='text' name='name"+n+"' class='form-control'/>","<div style='text-align:center'><button class='btn btn-link delete' key='"+n+"'><i class='fa fa-trash-o'></i></button><button class='btn btn-link primary'><i class='fa fa-key'></i></button></div>"];n++;return e};t.init()};return{main:function(){a()}}});