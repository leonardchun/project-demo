define(["base","app/commonApp"],function(e,t){var a={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,paging:false,info:false,ajax:{url:"../json/checkJson/dataMsg.json",type:"get"},columns:[{data:"id",sWidth:"5%"},{data:"name",sWidth:"15%"},{data:"englishName",sWidth:"20%"},{data:"code",sWidth:"15%"},{data:"type",sWidth:"15%"},{data:"length",sWidth:"15%"},{data:"sign",sWidth:"15%"}],columnDefs:[{render:function(e,t,a,n){return"<input type='checkbox' disabled checked name='cb' value='"+a.id+"' class='cb' cid='"+a.id+"'/>"},targets:0}]};var n=function(){$.ajax({url:"../json/checkJson/reqMsg.json",type:"get",success:function(e){$.each(e,function(e,t){$("#applyMsg ."+e).html(t)})}})};function s(){$.ajax({url:"../json/checkJson/metaDataMsg.json",type:"get",success:function(e){$.each(e,function(e,t){$("#resMsg ."+e).html(t)})}})}function r(e){var t="";$.ajax({url:"../json/checkJson/dataMsg.json",type:"get",async:false,success:function(a){if(a.data&&a.data.length>0){$.each(a.data,function(a,n){if(n.id==e){t+="<option value='"+n.id+"' selected>"+n.name+"</option>"}else{t+="<option value='"+n.id+"'>"+n.name+"</option>"}})}}});return t}function o(e){var t="";$.ajax({url:"../json/keywords/keyword.json",type:"get",async:false,success:function(a){if(a.data&&a.data.length>0){$.each(a.data,function(a,n){if(n.id==e){t+="<option value='"+n.id+"' selected content='"+n.content+"'>"+n.name+"</option>"}else{t+="<option value='"+n.id+"' content='"+n.content+"'>"+n.name+"</option>"}})}}});return t}function i(e){var t="";$.ajax({url:"../json/checkJson/compareSymbol.json",type:"get",async:false,success:function(a){if(a&&a.length>0){$.each(a,function(a,n){if(n.id==e){t+="<option value='"+n.id+"' selected  compareValue='"+n.compareValue+"'>"+n.name+"</option>"}else{t+="<option value='"+n.id+"' compareValue='"+n.content+"'>"+n.name+"</option>"}})}}});return t}var l={processing:true,serverSide:false,searching:false,ordering:false,lengthChange:false,paging:false,info:false,ajax:{url:"../json/checkJson/sensitiveWordFilter.json",type:"get"},columns:[{data:"resName",sWidth:"14%"},{data:"dataName",sWidth:"14%"},{data:"dataType",sWidth:"14%"},{data:"fieldName",sWidth:"14%"},{data:"strategyName",sWidth:"14%"},{data:"content",sWidth:"20%"},{data:"operate",sWidth:"10%"}],columnDefs:[{render:function(e,t,a,n){return"<select class='form-control'>"+r(a.dataName)+"</select>"},targets:1},{render:function(e,t,a,n){return"<select class='form-control strategy'>"+o(a.strategyName)+"<option value='-1' class='createStrategy'>新建一个策略</option></select>"},targets:4},{render:function(e,t,a,n){return"<button class='btn btn-link delete del1'><i class='fa fa-trash-o'></i></button>"},targets:6}],drawCallback:function(e){$(".strategy").off().on("change",function(){if($(this).val()!=-1){var e=$(this).find("option:selected").attr("content");$(this).parent("td").next().html(e)}else{p()}});h();g()}};var c={processing:true,serverSide:false,searching:false,ordering:false,lengthChange:false,paging:false,info:false,ajax:{url:"../json/checkJson/dataFilter.json",type:"get"},columns:[{data:"resName",sWidth:"15%"},{data:"dataName",sWidth:"15%"},{data:"dataType",sWidth:"15%"},{data:"fieldName",sWidth:"15%"},{data:"compare",sWidth:"10%"},{data:"compareValue",sWidth:"20%"},{data:"operate",sWidth:"10%"}],columnDefs:[{render:function(e,t,a,n){return"<select class='form-control dataItem'>"+r(a.dataName)+"</select>"},targets:1},{render:function(e,t,a,n){return"<select class='form-control compare'>"+i(a.compare)+"</select>"},targets:4},{render:function(e,t,a,n){if(a.compareValue!=undefined){return"<input type='text' class='form-control' value='"+a.compareValue+"'>"}else{return"<input type='text' class='form-control' value=''>"}},targets:5},{render:function(e,t,a,n){return"<button class='btn btn-link delete del2'><i class='fa fa-trash-o'></i></button>"},targets:6}],drawCallback:function(e){$("#data_filter .dataItem").off().on("click",function(){});$(".compare").off().on("change",function(){if($(this).val()!=-1){var e=$(this).find("option:selected").attr("compareValue");$(this).parent("td").next().html(e)}});h();g()}};var d={processing:true,serverSide:false,searching:false,ordering:false,lengthChange:false,paging:false,info:false,ajax:{url:"../json/checkJson/dataDesensitization.json",type:"get"},columns:[{data:"resName",sWidth:"16%"},{data:"dataName",sWidth:"16%"},{data:"dataType",sWidth:"16%"},{data:"fieldName",sWidth:"16%"},{data:"showRule",sWidth:"25%"},{data:"operate",sWidth:"11%"}],columnDefs:[{render:function(e,t,a,n){return"<select class='form-control'>"+r(a.dataName)+"</select>"},targets:1},{render:function(e,t,a,n){return"<span style='display:inline-block;margin-right:7px'><select class='form-control'><option value='1'>隐藏</option><option value='2'>保留</option></select></span>"+"<span style='display:inline-block;width:50px;position:relative;top:-1px'><input type='text' class='form-control'></span><span style='margin:0 5px'>到</span>"+"<span style='display:inline-block;width:50px;position:relative;top:-1px'><input type='text' class='form-control'></span><span style='margin:0 5px'>位</span>"},targets:4},{render:function(e,t,a,n){return"<button class='btn btn-link delete del3'><i class='fa fa-trash-o'></i></button>"},targets:5}],drawCallback:function(e){h();g()}};var f={processing:true,serverSide:false,searching:false,ordering:false,lengthChange:false,paging:false,info:false,ajax:{url:"../json/checkJson/dataTransform.json",type:"get"},columns:[{data:"resName",sWidth:"15%"},{data:"dataName",sWidth:"15%"},{data:"dataType",sWidth:"15%"},{data:"fieldName",sWidth:"15%"},{data:"content",sWidth:"15%"},{data:"replace",sWidth:"15%"},{data:"operate",sWidth:"10%"}],columnDefs:[{render:function(e,t,a,n){return"<select class='form-control dataItem'>"+r(a.dataName)+"</select>"},targets:1},{render:function(e,t,a,n){return"<input type='text' class='form-control'>"},targets:4},{render:function(e,t,a,n){return"<input type='text' class='form-control'>"},targets:5},{render:function(e,t,a,n){return"<button class='btn btn-link delete del4'><i class='fa fa-trash-o'></i></button>"},targets:6}],drawCallback:function(e){h();g()}};var u=function(t,a,n){var s;s=e.datatables({container:t,option:a});switch(n){case 0:grid=s;break;case 1:grid1=s;break;case 2:grid2=s;break;case 3:grid3=s;break;case 4:grid4=s;break}};var p=function(){var a=e.modal({label:"新建策略",width:500,height:200,url:"../html/systemManage/keywordsFilter/create.html",drag:true,buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){e.form.validate({form:$("#form"),checkAll:true,passCallback:function(){grid3.reload()}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){t.reset($("#form"))}}]})};function h(){$(".add").off().on("click",function(){var e=$(this).attr("data-key");var t=[{resName:"1"},{dataName:"11"},{dataType:"1"},{fieldName:"1"},{strategyName:"1"},{content:"1"},{operate:"1"}];var a=[{resName:"1"},{dataName:"11"},{dataType:"1"},{fieldName:"1"},{strategyName:"1"},{content:"1"},{operate:"1"}];var n=[{resName:"1"},{dataName:"11"},{dataType:"1"},{fieldName:"1"},{strategyName:"1"},{content:"1"},{operate:"1"}];var s=[{resName:"1"},{dataName:"11"},{dataType:"1"},{fieldName:"1"},{strategyName:"1"},{content:"1"},{operate:"1"}];switch(e){case"1":grid1.addRow(t);break;case"2":grid2.addRow(t);break;case"3":grid3.addRow(t);break;case"4":grid4.addRow(t);break}})}function g(){$(".delete").off().on("click",function(){if($(this).hasClass("del1")){grid1.deleteRow(this)}else if($(this).hasClass("del2")){grid2.deleteRow(this)}else if($(this).hasClass("del3")){grid3.deleteRow(this)}else{grid4.deleteRow(this)}})}return{main:function(){n();s();u($("#dataMsg"),a,0);u($("#sensitive_word_filter"),l,1);u($("#data_filter"),c,2);u($("#data_desensitization"),d,3);u($("#data_transform"),f,4)}}});