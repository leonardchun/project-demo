define(["base","app/commonApp"],function(t,n){var a=null;var e={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,pagingType:"full_numbers",ajax:{url:"../json/keywords/keyword.json",type:"get"},columns:[{data:"id",sWidth:"5%"},{data:"name",sWidth:"20%"},{data:"content",sWidth:"30%"},{data:"description",sWidth:"45%"}],columnDefs:[{render:function(t,n,a,e){return"<div class='checkboxWrapper'><input type='checkbox' name='cb' value='"+a.id+"' class='cb' cid='"+a.id+"'/></div>"},targets:0}],drawCallback:function(a){t.selectAll($("#cball"),$(".cb"),function(){n.checkByGridButton($(".cb"))})}};var i=function(){a=t.datatables({container:$("#keywords"),option:e})};var c=function(){$(".ui-grid-buttonbar .add").on("click",function(){r()});$(".ui-grid-buttonbar .delete").on("click",function(){if(!$(this).hasClass("disabled")){l()}});$(".ui-grid-buttonbar .modify").on("click",function(){if(!$(this).hasClass("disabled")){s()}})};var r=function(){var e=t.modal({label:"新建策略",width:500,height:200,url:"../html/systemManage/keywordsFilter/create.html",drag:true,buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){t.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var i=t.form.getParams($("#form"));if(i){n.submit({url:"../json/submitSuccess.json",params:i});e.hide();n.search(a)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){n.reset($("#form"))}}]})};var s=function(){var e={cid:$(".ui-grid .cb:checked").attr("cid")};var i=t.modal({label:"修改",width:500,height:200,url:"../html/systemManage/keywordsFilter/modify.html",drag:true,buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){t.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var e=t.form.getParams($("#form"));if(e){n.submit({url:"../json/submitSuccess.json",params:e});i.hide();n.search(a)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){n.reset($("#form"))}}]})};var l=function(){var e={ids:t.getCR("cb",true)};t.confirm({confirmCallback:function(){n.submit({url:"../json/submitSuccess.json",params:e,callback:function(){n.search(a)}})}})};return{main:function(){i();c()}}});