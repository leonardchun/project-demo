define(["base","app/commonApp"],function(a,t){var n=null;var i={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,pagingType:"full_numbers",ajax:{url:"../json/catalogManage/dataManage.json",type:"get",contentType:"application/json",data:function(t){var n=a.form.getParams($("#search-form"));if(n){$.extend(t,n)}return JSON.stringify(t)}},columns:[{data:"id",sWidth:"3%"},{data:"dataName",sWidth:"13%"},{data:"dataEnglishName",sWidth:"13%"},{data:"dataCode",sWidth:"14%"},{data:"dataClassify",sWidth:"14%"},{data:"dataType",sWidth:"11%"},{data:"dataLength",sWidth:"11%"},{data:"whewherDictionary",sWidth:"11%"},{data:"dictionarySum",sWidth:"10%"}],columnDefs:[{render:function(a,t,n,i){return"<input type='checkbox' name='cb' value='"+n.id+"' class='cb' cid='"+JSON.stringify(n)+"'/>"},targets:0},{render:function(a,t,n,i){return"<a href='#' cid='"+JSON.stringify(n)+"' class='data_detail'>"+n.dataName+"</a>"},targets:1}],drawCallback:function(n){a.selectAll($("#cball"),$(".cb"),function(){t.checkByGridButton($(".cb"))});$(".data_detail").on("click",function(){u(this)})}};var e=function(){n=a.datatables({container:$("#example"),option:i})};var c=function(){$("#search").on("click",function(){t.search(n)})};var l=function(){$("#reset").on("click",function(){t.reset($("#search-form"),n)})};var r=function(){$(".ui-grid-buttonbar .add").on("click",function(){d()});$(".ui-grid-buttonbar .delete").on("click",function(){if($(this).hasClass("disabled")){return}else{o()}});$(".ui-grid-buttonbar .modify").on("click",function(){if($(this).hasClass("disabled")){return}else{s()}});$(".import").click(function(){$("#file").trigger("click")})};var s=function(){$("#button_type").val("1");var i={cid:$(".ui-grid .cb:checked").attr("cid")};var e=a.modal({width:800,height:400,label:"修改",url:"../html/catalogManage/dataManage_add.html",buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){a.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var i=a.form.getParams($("#form"));if(i){t.submit({url:"../json/submitSuccess.json",params:i});e.hide();t.search(n)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){t.reset($("#form"))}}]})};var o=function(){var i={ids:a.getCR("cb",true)};a.confirm({confirmCallback:function(){t.submit({url:"../json/submitSuccess.json",params:i,callback:function(){t.search(n)}})}})};var d=function(){$("#button_type").val();var i=a.modal({width:800,height:400,label:"新建",url:"../html/catalogManage/dataManage_add.html",buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){a.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var e=a.form.getParams($("#form"));if(e){t.submit({url:"../json/submitSuccess.json",params:e});i.hide();t.search(n)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){t.reset($("#form"))}}]})};var u=function(t){var n=a.modal({width:800,height:400,label:"详情",url:"../html/catalogManage/dataManage_detail.html",buttons:[{label:"关闭",cls:"btn btn-info",clickEvent:function(){n.hide()}}],callback:function(){var a=JSON.parse($(t).attr("cid"));$("#data_name").val(a.dataName);$("#data_english_name").val(a.dataEnglishName);$("#data_code").val(a.dataCode);$("#data_classify").val(a.dataClassify);$("#data_length").val(a.dataLength)}})};var f=function(){a.scroll({container:$(".ui-gridbar")})};return{main:function(){f();e();r();c();l()}}});