define(["base","app/commonApp"],function(a,t){var e=null;var i={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,pagingType:"full_numbers",ajax:{url:$.path+"/api/app/findSysApp",type:"get",data:function(e){t.gridPageFliter(e);var i=a.form.getParams("#search-form");var n;if(i){n=$.extend({page:e.page,size:e.size},i)}return n}},columns:[{data:"id",sWidth:"5%"},{data:"appName",sWidth:"20%"},{data:"description",sWidth:"30%"},{data:"ipAddress",sWidth:"20%"},{data:"appCode",sWidth:"25%"}],columnDefs:[{render:function(a,t,e,i){return"<div class='checkboxWrapper'><input type='checkbox' name='cb' value='"+e.id+"' class='cb' cid='"+e.id+"'/></div>"},targets:0}],drawCallback:function(e){a.selectAll($("#cball"),$(".cb"),function(){t.checkByGridButton($(".cb"))})}};var n=function(){e=a.datatables({container:$("#apiApp"),option:i,filter:t.gridFilter})};var r=function(){$(".ui-grid-buttonbar .add").on("click",function(){o()});$(".ui-grid-buttonbar .delete").on("click",function(){if($(this).hasClass("disabled")){return}else{u()}});$(".ui-grid-buttonbar .modify").on("click",function(){if(!$(this).hasClass("disabled")){var a=$(this).attr("keyAtrr");switch(a){case"0":s();break;case"1":d();break}}})};var c=function(){$("#search").on("click",function(){t.search(e)})};var l=function(){$("#reset").on("click",function(){t.reset($("#search-form"),e)})};var o=function(){var i=a.modal({label:"新建",width:600,height:210,url:"../html/resourceManage/apiApp_add.html",drag:true,buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){a.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var n=a.form.getParams($("#form"));if(n){t.submit({url:$.path+"/api/app/addApp",params:n,callback:function(){t.search(e)}});i.hide()}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){t.reset($("#form"))}}]})};var s=function(){var i={id:$(".ui-grid .cb:checked").attr("cid")};var n=a.modal({label:"修改",width:600,height:210,url:"../html/resourceManage/apiApp_modify.html",drag:true,buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){a.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var r=a.form.getParams($("#form"));if(r){var c=$.extend(i,r);t.submit({url:$.path+"/api/app/editApp",params:c,callback:function(){t.search(e)}});n.hide()}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){t.reset($("#form"))}}]})};var u=function(){var i=a.getChecks("cb");a.confirm({confirmCallback:function(){t.submit({url:$.path+"/api/app/deleteApp",params:i,callback:function(){t.search(e)}})}})};var d=function(){var t=a.modal({label:"查看",width:1e3,height:500,url:"../html/resourceManage/apiApp_view.html",drag:true,customScroll:true,buttons:[{label:"取消",cls:"btn btn-info",clickEvent:function(){t.hide()}}]})};return{main:function(){n();r();c();l()}}});