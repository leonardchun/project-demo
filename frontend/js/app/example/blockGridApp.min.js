define(["base","app/commonApp"],function(t,a){var n=null;var e=function(t,a){var n="";switch(t){case 1:n="<button rid='"+a+"' type='subscribe' class='btn btn-default disabled'>评论</button>"+"<button rid='"+a+"' type='cancel' class='btn btn-warning'>撤销</button>"+"<button rid='"+a+"' type='delete' class='btn btn-warning'>删除</button>";break;case 2:n="<button rid='"+a+"' type='subscribe' class='btn btn-default disabled'>评论</button>"+"<button rid='"+a+"' type='cancel' class='btn btn-default disabled'>撤销</button>"+"<button rid='"+a+"' type='delete' class='btn btn-default disabled'>删除</button>";break;case 3:n="<button rid='"+a+"' type='subscribe' class='btn btn-warning'>评论</button>"+"<button rid='"+a+"' type='cancel' class='btn btn-default disabled'>撤销</button>"+"<button rid='"+a+"' type='delete' class='btn btn-default disabled'>删除</button>";break;case 4:n="<button rid='"+a+"' type='subscribe' class='btn btn-default disabled'>评论</button>"+"<button rid='"+a+"' type='cancel' class='btn btn-default disabled'>撤销</button>"+"<button rid='"+a+"' type='delete' class='btn btn-warning'>删除</button>";break}return n};var s={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,ajax:{url:"../json/blockGrid.json",type:"get",contentType:"application/json",data:function(a){var n=t.form.getParams($("#search-form"));if(n){$.extend(a,n)}return JSON.stringify(a)}},columns:[{data:"data",sWidth:"100%"}],columnDefs:[{render:function(t,n,s,i){var s=s.data;var l=a.getStar(s.star);var r=e(s.status,s.id);var c="<div class='ui-blockGrid-item'>"+"<ul>"+"<li type='photo' class='col-md-2'>"+"<img src='"+s.photo+"'/>"+"<span class='ui-starbar'>"+l+"</span>"+"</li>"+"<li type='info' class='col-md-8'>"+"<ul class='ui-blockGrid-content'>"+"<li type='title'>"+s.title+"<span class='ui-datetime'>（"+s.datetime+"）</span>"+"</li>"+"<li>"+s.content+"</li>"+"<li>"+"<div class='ui-tag blue'><i class='fa fa-handshake-o'></i><span>"+s.interestCount+"</span></div>"+"<div class='ui-tag red'><i class='fa fa-cloud-download'></i><span>"+s.subscribeCount+"</span></div>"+"</li>"+"</ul>"+"</li>"+"<li type='buttons' class='col-md-2'>"+r+"</li>"+"</ul>"+"</div>";return c},targets:0}],drawCallback:function(t){}};var i=function(){n=t.datatables({container:$("#example"),option:s});t.scroll({container:$(".ui-gridbar")})};var l=function(){$("#search").on("click",function(){a.search(n)})};var r=function(){$("#reset").on("click",function(){a.reset($("#search-form"),n)})};var c=function(){$(".ui-grid-linkGroup li").on("click",function(){$(".ui-grid-linkGroup .active").removeClass("active");$(this).addClass("active");var t=$(this).attr("key");$("#status").val(t);a.search(n)})};return{main:function(){i();c();l();r()}}});