define(["base","app/commonApp"],function(e,t){var r=null;var i={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,pagingType:"full_numbers",ajax:{url:$.path+"/api/apiResourceMonitor/myPublishResourceByPage",type:"get",contentType:"application/json",data:function(r){t.gridPageFliter(r);var i=e.form.getParams("#publishRes-form");var a;if(i){a=$.extend({page:r.page,size:r.size},i)}return a}},columns:[{data:"id",sWidth:"5%"},{data:"taskName",sWidth:"20%"},{data:"apiSource",sWidth:"10%"},{data:"state",sWidth:"10%"},{data:"requestTime",sWidth:"15%"},{data:"requestNumber",sWidth:"20%"},{data:"currentNumber",sWidth:"20%"}],columnDefs:[{render:function(e,t,r,i){return"<div class='checkboxWrapper'><input type='checkbox' name='cb' value='"+r.roleId+"' class='cb' cAll = '"+JSON.stringify(r)+"' cid='"+r.roleId+"'/></div>"},targets:0},{render:function(e,t,r,i){var a=r.apiSource;if(a){if(a=="local"){return"<div title='"+a+"'>本地数据源</div>"}else if(a=="file"){return"<div title='"+a+"'>文件</div>"}else{return"<div title='"+a+"'>API</div>"}}else{return"--"}},targets:2},{render:function(e,t,r,i){var a=r.state;if(a){if(a=="0"){return"<div title='"+a+"'>启用</div>"}else if(a=="-1"){return"<div title='"+a+"'>发布方暂停</div>"}else{return"<div title='"+a+"'>发布方暂停</div>"}}else{return""}},targets:3},{render:function(e,t,r,i){if(r.requestTime){return"<div>"+r.requestTime+"</div>"}else{return"--"}},targets:4},{render:function(e,t,r,i){if(r.requestNumber){return"<div>"+r.requestNumber+"</div>"}else{return"--"}},targets:5},{render:function(e,t,r,i){if(r.currentNumber){return"<div>"+r.currentNumber+"</div>"}else{return"--"}},targets:6}],drawCallback:function(r){e.selectAll($("#cball"),$(".cb"),function(){t.checkByGridButton($(".cb"))})}};var a={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,ajax:{url:$.path+"/api/apiResourceMonitor/mySubscribeResourceByPage",type:"get",contentType:"application/json",data:function(r){t.gridPageFliter(r);var i=e.form.getParams($("#subscibeRes-form"));var a;if(i){a=$.extend({page:r.page,size:r.size},i)}return a}},columns:[{data:"id",sWidth:"5%"},{data:"taskName",sWidth:"20%"},{data:"apiSource",sWidth:"8%"},{data:"pubEquipmentName",sWidth:"8%"},{data:"state",sWidth:"9%"},{data:"requestTime",sWidth:"15%"},{data:"requestNumber",sWidth:"20%"},{data:"currentNumber",sWidth:"20%"}],columnDefs:[{render:function(e,t,r,i){return"<div class='checkboxWrapper'><input type='checkbox' name='cb' value='"+r.roleId+"' class='cb' cAll = '"+JSON.stringify(r)+"' cid='"+r.roleId+"'/></div>"},targets:0},{render:function(e,t,r,i){var a=r.apiSource;if(a){if(a=="local"){return"<div title='"+a+"'>本地数据源</div>"}else if(a=="file"){return"<div title='"+a+"'>文件</div>"}else{return"<div title='"+a+"'>API</div>"}}else{return""}},targets:2},{render:function(e,t,r,i){var a=r.state;if(a){if(a=="0"){return"<div title='"+a+"'>启用</div>"}else if(a=="-1"){return"<div title='"+a+"'>发布方暂停</div>"}else{return"<div title='"+a+"'>发布方暂停</div>"}}else{return""}},targets:4},{render:function(e,t,r,i){if(r.requestTime){return"<div>"+r.requestTime+"</div>"}else{return"--"}},targets:5},{render:function(e,t,r,i){if(r.requestNumber){return"<div>"+r.requestNumber+"</div>"}else{return"--"}},targets:6},{render:function(e,t,r,i){if(r.currentNumber){return"<div>"+r.currentNumber+"</div>"}else{return"--"}},targets:7}],drawCallback:function(r){e.selectAll($("#cball"),$(".cb"),function(){t.checkByGridButton($(".cb"))})}};var n=function(i,a){r=e.datatables({container:i,option:a,filter:t.gridFilter})};var s=function(){$("#search").on("click",function(){t.search(r)})};var u=function(){$(".reset").off().on("click",function(){t.reset($(this).parents(".ui-searchbar").find("form"),r)})};var c=function(){e.confirm({label:"启用",text:"<div style='text-align:center;font-size:13px;'>确定启用?</div>",confirmCallback:function(){var e=$(".ui-grid .cb:checked").attr("cAll");var i=JSON.parse(e);var a={id:i.id,type:0};if($(".ui-grid-linkGroup").find("li.active").attr("key")=="0"){a.actionType=1}else{a.actionType=2}t.submit({url:$.path+"/api/apiResourceMonitor/startStopService",params:a,type:"post",callback:function(){t.search(r)}})}})};var d=function(){e.confirm({label:"暂停",text:"<div style='text-align:center;font-size:13px;'>确定暂停?</div>",confirmCallback:function(){var e=$(".ui-grid .cb:checked").attr("cAll");var i=JSON.parse(e);var a={id:i.id,type:-1};if($(".ui-grid-linkGroup").find("li.active").attr("key")=="0"){a.actionType=1}else{a.actionType=2}t.submit({url:$.path+"/api/apiResourceMonitor/startStopService",type:"post",params:a,callback:function(){t.search(r)}})}})};var l=function(){$(".ui-grid-linkGroup li").on("click",function(){$(".ui-grid-linkGroup .active").removeClass("active");$(this).addClass("active");var e=$(this).attr("key");switch(e){case"0":$("#publishRes-form").show();$("#subscibeRes-form").hide();n($("#publishRes"),i);$(".publishRes").show();$(".subscibeResWrapper").hide();break;case"1":$("#publishRes-form").hide();$("#subscibeRes-form").show();n($("#subscibeRes"),a);$(".publishRes").hide();$(".subscibeResWrapper").show();break}})};var o=function(){$(".ui-grid-buttonbar .modify").on("click",function(){if(!$(this).hasClass("disabled")){var e=$(this).attr("keyAtrr");switch(e){case"0":c();break;case"1":d();break}}})};return{main:function(){n($("#publishRes"),i);o();l();u()}}});