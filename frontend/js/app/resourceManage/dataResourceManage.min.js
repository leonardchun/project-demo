define(["base","app/commonApp"],function(a,t){var n=null;var e={processing:true,serverSide:true,searching:false,ordering:false,lengthChange:false,pagingType:"full_numbers",ajax:{url:"../json/resourceManage/dataResourceManage.json",type:"get",contentType:"application/json",data:function(t){var n=a.form.getParams($("#search-form"));if(n){$.extend(t,n)}return JSON.stringify(t)}},columns:[{data:"id",sWidth:"8%"},{data:"dataName",sWidth:"12%"},{data:"IPAddress",sWidth:"20%"},{data:"port",sWidth:"20%"},{data:"dataType",sWidth:"20%"},{data:"dataType",sWidth:"20%"}],columnDefs:[{render:function(a,t,n,e){return"<input type='checkbox' name='cb' value='"+n.id+"' class='cb' cid='"+JSON.stringify(n)+"'/>"},targets:0},{render:function(a,t,n,e){if(n.dataType==1){return"<div>数据库</div>"}else{return"<div>文件</div>"}},targets:4},{render:function(a,t,n,e){return"<div class='fa fa-search'><div>"},targets:5}],drawCallback:function(n){a.selectAll($("#cball"),$(".cb"),function(){t.checkByGridButton($(".cb"))})}};var r=function(){n=a.datatables({container:$("#example"),option:e})};var i=function(){$("#search").on("click",function(){t.search(n)})};var c=function(){$("#reset").on("click",function(){t.reset($("#search-form"),n)})};var s=function(){$(".ui-grid-buttonbar .add").on("click",function(){u()});$(".ui-grid-buttonbar .delete").on("click",function(){if($(this).hasClass("disabled")){return}else{l()}});$(".ui-grid-buttonbar .modify").on("click",function(){if($(this).hasClass("disabled")){return}else{o()}})};var o=function(){$("#button_type").val("1");var e={cid:$(".ui-grid .cb:checked").attr("cid")};var r=a.modal({width:800,height:300,label:"修改",url:"../html/resourceManage/dataResourceManage_add.html",buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){a.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var e=a.form.getParams($("#form"));if(e){t.submit({url:"../json/submitSuccess.json",params:e});r.hide();t.search(n)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){t.reset($("#form"))}}]})};var l=function(){var e={ids:a.getCR("cb",true)};a.confirm({confirmCallback:function(){t.submit({url:"../json/submitSuccess.json",params:e,callback:function(){t.search(n)}})}})};var u=function(){$("#button_type").val("");var e=a.modal({width:800,height:350,label:"新建",url:"../html/resourceManage/dataResourceManage_add.html",buttons:[{label:"保存",cls:"btn btn-info",clickEvent:function(){a.form.validate({form:$("#form"),checkAll:true,passCallback:function(){var r=a.form.getParams($("#form"));if(r){t.submit({url:"../json/submitSuccess.json",params:r});e.hide();t.search(n)}}})}},{label:"重置",cls:"btn btn-warning",clickEvent:function(){t.reset($("#form"))}}]})};var d=function(){a.scroll({container:$(".ui-gridbar")})};return{main:function(){d();r();s();i();c()}}});